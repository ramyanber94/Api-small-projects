<!DOCTYPE html>
<html>

<head>
    <title> ITC5202 - Assignment-6 </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="weather.css">
</head>

<body>
    <div class="container d-flex justify-content-center">
        <div class="weather">
            <div class="row">
                <div class=" col-md-6">
                    <div class="card"> <span class="icon"><img class="img-fluid" src="" id="BarrieImageCond" /></span>
                        <div class="title">
                            <h4 id="BarrieName"></h4>
                        </div>
                        <div class="MaxTempBarrie"><sup>&deg;</sup></div> <br>
                        <div class="MinTempBarrie"><sup>&deg;</sup></div>
                        <div class="row">
                            <div class="row-6">
                                <div class="header">General</div>
                                <div class="value" id="barrieDesc"></div>
                            </div>
                            <div class="row-6">
                                <div class="header">Sun Rise</div>
                                <div class="value" id="barrieSunRise"></div>
                            </div>
                            <div class="row-6">
                                <div class="header">Sun Set</div>
                                <div class="value" id="barrieSunSet"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class=" col-md-6">
                    <div class="card"> <span class="icon"><img class="img-fluid" src="" id="TorontoImageCond" /></span>
                        <div class="title">
                            <h4 id="TorontoName"></h4>
                        </div>
                        <div class="MaxTempToronto"><sup>&deg;</sup></div> <br>
                        <div class="MinTempToronto"><sup>&deg;</sup></div>
                        <div class="row">
                            <div class="row-6">
                                <div class="header">Weather</div>
                                <div class="value" id="torontoDesc"></div>
                            </div>
                            <div class="row-6">
                                <div class="header">Sun Rise</div>
                                <div class="value" id="torontoSunRise"></div>
                            </div>
                            <div class="row-6">
                                <div class="header">Sun Set</div>
                                <div class="value" id="torontoSunSet"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        function loadDoc(city) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    myFunction(this);
                }
            };
            
            xhttp.open("GET", "http://api.openweathermap.org/data/2.5/group?id=5894171,6167865&appid=6c8d866e061071262295aaa0cbc33e3a", true);
            xhttp.send();
        }
        function myFunction(json) {
            var jsonDoc = json.responseText;
            var myObj = JSON.parse(jsonDoc);
            for (i = 0; i < myObj.list.length; i++) {
                for (j = 0; j < myObj.list[i].weather.length; j++) {
                    document.querySelector("#torontoSunRise").innerHTML = new Date(myObj.list[1].sys.sunrise);
                    document.querySelector("#torontoSunSet").innerHTML = new Date(myObj.list[1].sys.sunset);
                    document.querySelector("#barrieSunRise").innerHTML = new Date(myObj.list[0].sys.sunrise);
                    document.querySelector("#barrieSunSet").innerHTML = new Date(myObj.list[0].sys.sunset);
                    document.getElementById("BarrieName").innerHTML = myObj.list[0].name;
                    document.querySelector(".MaxTempBarrie").innerHTML = (Math.round((myObj.list[0].main.temp_max - 273.15) * 1.8) + 32) + "&#8457;";
                    document.querySelector(".MinTempBarrie").innerHTML = (Math.round((myObj.list[0].main.temp_min - 273.15) * 1.8) + 32) + "&#8457;";
                    document.querySelector("#barrieDesc").innerHTML = myObj.list[0].weather[0].main;
                    document.querySelector("#BarrieImageCond").src = 'http://openweathermap.org/img/wn/' + myObj.list[0].weather[0].icon + '.png';
                    document.getElementById("TorontoName").innerHTML = myObj.list[1].name;
                    document.querySelector(".MaxTempToronto").innerHTML = (Math.round((myObj.list[1].main.temp_max - 273.15) * 1.8) + 32) + "&#8457;";
                    document.querySelector(".MinTempToronto").innerHTML = (Math.round((myObj.list[1].main.temp_min - 273.15) * 1.8) + 32) + "&#8457;";
                    document.querySelector("#torontoDesc").innerHTML = myObj.list[1].weather[0].main;
                    document.querySelector("#TorontoImageCond").src = 'http://openweathermap.org/img/wn/' + myObj.list[1].weather[0].icon + '.png';
                }
            }
        }
        loadDoc();
    </script>
</body>

</html>