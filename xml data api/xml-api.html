<!DOCTYPE html>
<html>

<head>
    <title> ITC5202 - Assignment-7 </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="weather.css">
</head>

<body>
    <div class="container d-flex justify-content-center">
        <div class="weather">
            <div class="row">
                <div class=" col-md-6">
                    <div class="card"> <span class="icon"><img class="img-fluid" src="" id="BarrieImageCond" /></span>
                        <div class="title">
                            <p id="BarrieName"></p>
                        </div>
                        <div class="MaxTempBarrie"><sup>&deg;</sup></div> <br>
                        <div class="MinTempBarrie"><sup>&deg;</sup></div>
                        <div class="row">
                            <div class="row-6">
                                <div class="header">General</div>
                                <div class="value" id="barrieDesc">Sunny</div>
                            </div>
                            <div class="row-6">
                                <div class="value" id="barrieSunRise"></div>
                            </div>
                            <div class="row-6">
                                <div class="value" id="barrieSunSet"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class=" col-md-6">
                    <div class="card"> <span class="icon"><img class="img-fluid" src="" id="TorontoImageCond" /></span>
                        <div class="title">
                            <p id="TorontoName"></p>
                        </div>
                        <div class="MaxTempToronto"><sup>&deg;</sup></div> <br>
                        <div class="MinTempToronto"><sup>&deg;</sup></div>
                        <div class="row">
                            <div class="row-6">
                                <div class="header">General</div>
                                <div class="value" id="torontoDesc"></div>
                            </div>
                            <div class="row-6">
                                <div class="value" id="torontoSunRise"></div>
                            </div>
                            <div class="row-6">
                                <div class="value" id="torontoSunSet"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        function torontoLoadDoc() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data1(this);
                }
            };
            xhttp.open("GET", "http://api.openweathermap.org/data/2.5/weather?q=toronto&mode=xml&appid=6c8d866e061071262295aaa0cbc33e3a", true);
            xhttp.send();
            data1 = (xml) => {
                var xmlDoc = xml.responseXML;
                var current = xmlDoc.getElementsByTagName("current");
                for (i = 0; i < current.length; i++) {
                    document.getElementById("TorontoName").innerHTML = current[i].querySelector("city").getAttribute('name');
                    document.querySelector(".MaxTempToronto").innerHTML = (Math.round((current[i].querySelector("temperature").getAttribute('max') - 273.15) * 1.8) + 32) + "&#8457;";
                    document.querySelector(".MinTempToronto").innerHTML = (Math.round((current[i].querySelector("temperature").getAttribute('min') - 273.15) * 1.8) + 32) + "&#8457;";
                    document.querySelector("#torontoDesc").innerHTML = current[i].querySelector("weather").getAttribute('value');
                    document.querySelector("#TorontoImageCond").src = 'http://openweathermap.org/img/wn/' + current[i].querySelector("weather").getAttribute('icon') + '.png';
                    document.getElementById("torontoSunRise").innerHTML = "Sun rise: " + new Date(current[i].querySelector("sun").getAttribute('rise'));
                    document.getElementById("torontoSunSet").innerHTML = "Sun set: " + new Date(current[i].querySelector("sun").getAttribute('set'));
                }
            }
        }
        function barrieLoadDoc() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    data2(this);
                }
            };
            xhttp.open("GET", "http://api.openweathermap.org/data/2.5/weather?q=Barrie&mode=xml&appid=6c8d866e061071262295aaa0cbc33e3a", true);
            xhttp.send();
            data2 = (xml) => {
                var xmlDoc = xml.responseXML;
                var current = xmlDoc.getElementsByTagName("current");
                for (i = 0; i < current.length; i++) {
                    document.getElementById("BarrieName").innerHTML = current[i].querySelector("city").getAttribute('name');
                    document.querySelector(".MaxTempBarrie").innerHTML = (Math.round((current[i].querySelector("temperature").getAttribute('max') - 273.15) * 1.8) + 32) + "&#8457;";
                    document.querySelector(".MinTempBarrie").innerHTML = (Math.round((current[i].querySelector("temperature").getAttribute('min') - 273.15) * 1.8) + 32) + "&#8457;";
                    document.querySelector("#barrieDesc").innerHTML = current[i].querySelector("weather").getAttribute('value');
                    document.querySelector("#BarrieImageCond").src = 'http://openweathermap.org/img/wn/' + current[i].querySelector("weather").getAttribute('icon') + '.png';
                    document.getElementById("barrieSunRise").innerHTML = "Sun rise: "+new Date(current[i].querySelector("sun").getAttribute('rise'));
                    document.getElementById("barrieSunSet").innerHTML = "Sun set: "+new Date(current[i].querySelector("sun").getAttribute('set'));
                }
            }
        }
        torontoLoadDoc();
        barrieLoadDoc();
    </script>
</body>

</html>